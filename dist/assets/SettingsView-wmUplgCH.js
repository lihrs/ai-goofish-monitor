import{d as A,R as Ke,a4 as ke,m as le,S as qe,r as y,n as He,q as w,o as x,w as a,s as R,e,P as ae,I as M,p as Pe,a as l,a5 as De,g as N,V as We,T as Ye,i as Fe,a6 as Ge,a7 as je,a8 as h,a9 as ze,aa as Je,ab as he,ac as Xe,$ as Qe,y as Ze,z as et,Z as _e,v as ge,B as ye,ad as tt,b as s,W as ce,Y as ue,c as C,t as V,f as n,_ as b,h as O,G as D,A as U,F as lt,D as at,J as xe,K as Ve,L as Oe,M as Te,N as Ee,O as Se,ae as st,af as ot,k as nt,H as we}from"./index-DH6y1Cde.js";import{_ as S}from"./Input.vue_vue_type_script_setup_true_lang-By5zhDLs.js";import{_ as it}from"./Switch.vue_vue_type_script_setup_true_lang-D_cuhvZe.js";import{a as X,_ as W}from"./CardContent.vue_vue_type_script_setup_true_lang-AENY5R10.js";import{_ as Q,a as Z,b as de,c as re}from"./CardTitle.vue_vue_type_script_setup_true_lang-CXt5JSnn.js";import{u as ut,e as dt,R as rt,_ as fe,a as pe,c as ve,b as me,d as Y}from"./SelectValue.vue_vue_type_script_setup_true_lang-C-Sl6ipp.js";import"./VisuallyHiddenInput-BWXw6jel.js";const[be,ft]=Ke("TabsRoot");var pt=A({__name:"TabsRoot",props:{defaultValue:{type:null,required:!1},orientation:{type:String,required:!1,default:"horizontal"},dir:{type:String,required:!1},activationMode:{type:String,required:!1,default:"automatic"},modelValue:{type:null,required:!1},unmountOnHide:{type:Boolean,required:!1,default:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["update:modelValue"],setup(p,{emit:o}){const r=p,u=o,{orientation:g,unmountOnHide:v,dir:m}=ke(r),_=ut(m);le();const c=qe(r,"modelValue",u,{defaultValue:r.defaultValue,passive:r.modelValue===void 0}),T=y();return ft({modelValue:c,changeModelValue:E=>{c.value=E},orientation:g,dir:_,unmountOnHide:v,activationMode:r.activationMode,baseId:He(void 0,"reka-tabs"),tabsList:T}),(E,F)=>(x(),w(e(ae),{dir:e(_),"data-orientation":e(g),"as-child":E.asChild,as:E.as},{default:a(()=>[R(E.$slots,"default",{modelValue:e(c)})]),_:3},8,["dir","data-orientation","as-child","as"]))}}),vt=pt;function Ae(p,o){return`${p}-trigger-${o}`}function Ce(p,o){return`${p}-content-${o}`}var mt=A({__name:"TabsContent",props:{value:{type:[String,Number],required:!0},forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(p){const o=p,{forwardRef:r}=le(),u=be(),g=M(()=>Ae(u.baseId,o.value)),v=M(()=>Ce(u.baseId,o.value)),m=M(()=>o.value===u.modelValue.value),_=y(m.value);return Pe(()=>{requestAnimationFrame(()=>{_.value=!1})}),(c,T)=>(x(),w(e(We),{present:c.forceMount||m.value,"force-mount":""},{default:a(({present:E})=>[l(e(ae),{id:v.value,ref:e(r),"as-child":c.asChild,as:c.as,role:"tabpanel","data-state":m.value?"active":"inactive","data-orientation":e(u).orientation.value,"aria-labelledby":g.value,hidden:!E,tabindex:"0",style:De({animationDuration:_.value?"0s":void 0})},{default:a(()=>[!e(u).unmountOnHide.value||E?R(c.$slots,"default",{key:0}):N("v-if",!0)]),_:2},1032,["id","as-child","as","data-state","data-orientation","aria-labelledby","hidden","style"])]),_:3},8,["present"]))}}),_t=mt,gt=A({__name:"TabsList",props:{loop:{type:Boolean,required:!1,default:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(p){const o=p,{loop:r}=ke(o),{forwardRef:u,currentElement:g}=le(),v=be();return v.tabsList=g,(m,_)=>(x(),w(e(dt),{"as-child":"",orientation:e(v).orientation.value,dir:e(v).dir.value,loop:e(r)},{default:a(()=>[l(e(ae),{ref:e(u),role:"tablist","as-child":m.asChild,as:m.as,"aria-orientation":e(v).orientation.value},{default:a(()=>[R(m.$slots,"default")]),_:3},8,["as-child","as","aria-orientation"])]),_:3},8,["orientation","dir","loop"]))}}),yt=gt,ct=A({__name:"TabsTrigger",props:{value:{type:[String,Number],required:!0},disabled:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(p){const o=p,{forwardRef:r}=le(),u=be(),g=M(()=>Ae(u.baseId,o.value)),v=M(()=>Ce(u.baseId,o.value)),m=M(()=>o.value===u.modelValue.value);return(_,c)=>(x(),w(e(rt),{"as-child":"",focusable:!_.disabled,active:m.value},{default:a(()=>[l(e(ae),{id:g.value,ref:e(r),role:"tab",type:_.as==="button"?"button":void 0,as:_.as,"as-child":_.asChild,"aria-selected":m.value?"true":"false","aria-controls":v.value,"data-state":m.value?"active":"inactive",disabled:_.disabled,"data-disabled":_.disabled?"":void 0,"data-orientation":e(u).orientation.value,onMousedown:c[0]||(c[0]=Fe(T=>{!_.disabled&&T.ctrlKey===!1?e(u).changeModelValue(_.value):T.preventDefault()},["left"])),onKeydown:c[1]||(c[1]=Ye(T=>e(u).changeModelValue(_.value),["enter","space"])),onFocus:c[2]||(c[2]=()=>{const T=e(u).activationMode!=="manual";!m.value&&!_.disabled&&T&&e(u).changeModelValue(_.value)})},{default:a(()=>[R(_.$slots,"default")]),_:3},8,["id","type","as","as-child","aria-selected","aria-controls","data-state","disabled","data-disabled","data-orientation"])]),_:3},8,["focusable","active"]))}}),bt=ct;function xt(){const p=y({}),o=y({}),r=y(null),u=y(!1),g=y(!1),v=y(!1),m=y(null);async function _(){g.value=!0,m.value=null;try{const[f,oe,ne]=await Promise.all([Ge(),je(),h()]);p.value=f,o.value=oe,r.value=ne}catch(f){f instanceof Error&&(m.value=f)}finally{g.value=!1,u.value=!0}}async function c(){g.value=!0,m.value=null;try{r.value=await h()}catch(f){throw f instanceof Error&&(m.value=f),f}finally{g.value=!1}}async function T(){v.value=!0;try{await Xe(p.value),r.value=await h()}catch(f){throw f instanceof Error&&(m.value=f),f}finally{v.value=!1}}async function E(){v.value=!0;try{await he(o.value),r.value=await h()}catch(f){throw f instanceof Error&&(m.value=f),f}finally{v.value=!1}}async function F(){v.value=!0;try{return await Je(o.value)}catch(f){throw f instanceof Error&&(m.value=f),f}finally{v.value=!1}}async function se(){v.value=!0;try{return await ze()}catch(f){throw f instanceof Error&&(m.value=f),f}finally{v.value=!1}}return Pe(_),{notificationSettings:p,aiSettings:o,systemStatus:r,isLoading:g,isSaving:v,isReady:u,error:m,fetchAll:_,saveNotificationSettings:T,saveAiSettings:E,testAiConnection:F,testAiConnectionBackend:se,refreshStatus:c}}const Vt=A({__name:"Tabs",props:{defaultValue:{},orientation:{},dir:{},activationMode:{},modelValue:{},unmountOnHide:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["update:modelValue"],setup(p,{emit:o}){const g=Qe(p,o);return(v,m)=>(x(),w(e(vt),Ze(et(e(g))),{default:a(()=>[R(v.$slots,"default")]),_:3},16))}}),ee=A({__name:"TabsContent",props:{value:{},forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(p){const o=p,r=_e(o,"class");return(u,g)=>(x(),w(e(_t),ge({class:e(ye)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",o.class)},e(r)),{default:a(()=>[R(u.$slots,"default")]),_:3},16,["class"]))}}),Ot=A({__name:"TabsList",props:{loop:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(p){const o=p,r=_e(o,"class");return(u,g)=>(x(),w(e(yt),ge(e(r),{class:e(ye)("inline-flex items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",o.class)}),{default:a(()=>[R(u.$slots,"default")]),_:3},16,["class"]))}}),Tt={class:"truncate"},te=A({__name:"TabsTrigger",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(p){const o=p,r=_e(o,"class"),u=tt(r);return(g,v)=>(x(),w(e(bt),ge(e(u),{class:e(ye)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",o.class)}),{default:a(()=>[s("span",Tt,[R(g.$slots,"default")])]),_:3},16,["class"]))}});async function Et(){return await ce("/api/prompts")}async function St(p){return await ce(`/api/prompts/${p}`)}async function wt(p,o){return await ce(`/api/prompts/${p}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:o})})}const kt={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4"},Pt={class:"grid gap-2"},At={class:"grid gap-2"},Ct={class:"flex items-center gap-2"},Rt={class:"grid gap-2"},Bt={class:"grid gap-2"},Ut={class:"grid gap-2"},Lt={class:"grid gap-2"},$t={class:"grid grid-cols-2 gap-4"},It={class:"grid gap-2"},Nt={class:"grid gap-2"},Mt={class:"grid gap-2"},Kt={class:"grid grid-cols-2 gap-4"},qt={class:"grid gap-2"},Ht={class:"grid gap-2"},Dt={class:"border-t pt-4 space-y-4"},Wt={class:"grid gap-2"},Yt={class:"grid grid-cols-2 gap-4"},Ft={class:"grid gap-2"},Gt={class:"grid gap-2"},jt={class:"grid gap-2"},zt={class:"grid gap-2"},Jt={class:"grid gap-2"},ht={class:"flex items-center space-x-2 mt-2"},Xt={class:"flex justify-end"},Qt={key:0,class:"space-y-6"},Zt={class:"flex items-center justify-between border-b pb-4"},el={class:"border-b pb-4"},tl={class:"flex items-center justify-between mb-2"},ll={class:"flex flex-wrap gap-2"},al={key:0,class:"mt-4 bg-amber-50 border border-amber-200 rounded-md p-4 text-sm text-amber-800"},sl={class:"flex items-center justify-between mb-4"},ol={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},nl={class:"flex justify-between items-center"},il={class:"flex justify-between items-center"},ul={class:"text-xs text-gray-500 mt-1"},dl={key:1,class:"text-center py-8 text-gray-500"},rl={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-3 py-2 rounded"},fl={class:"grid gap-2"},pl={key:0,class:"text-sm text-gray-500"},vl={class:"grid gap-2"},ml={class:"space-y-4 text-sm text-gray-600"},_l={class:"grid gap-2"},Tl=A({__name:"SettingsView",setup(p){const{notificationSettings:o,aiSettings:r,systemStatus:u,isLoading:g,isSaving:v,isReady:m,error:_,refreshStatus:c,saveNotificationSettings:T,saveAiSettings:E,testAiConnection:F,testAiConnectionBackend:se}=xt(),f=y("ai"),oe=nt(),ne=new Set(["notifications","ai","status","prompts"]),K=y(!1),G=y(""),j=y(!1),L=y(!1),z=y(!1),q=y(!1),ie=y([]),k=y(null),H=y(""),$=y(!1),J=y(!1),I=y(null);function B(d,t){we({title:d,description:t})}function P(d,t){we({title:d,description:t,variant:"destructive"})}async function Re(){try{await T(),B("通知设置已保存")}catch(d){P("通知设置保存失败",d.message)}}async function Be(){try{await E(),B("AI 设置已保存")}catch(d){P("AI 设置保存失败",d.message)}}async function Ue(){try{const d=await F();B("AI 连接测试完成",d.message)}catch(d){P("AI 连接测试失败",d.message)}}async function Le(){try{const d=await se();B("后端容器测试完成",d.message)}catch(d){P("后端容器测试失败",d.message)}}async function $e(){const d=G.value.trim();if(!d){P("缺少登录内容","请粘贴从浏览器获取的 JSON 内容。");return}j.value=!0;try{const t=await st(d);B("登录状态更新成功",t.message),G.value="",K.value=!1,await c(),window.dispatchEvent(new Event("login-state-changed"))}catch(t){P("登录状态更新失败",t.message)}finally{j.value=!1}}async function Ie(){L.value=!0;try{const d=await ot();B("登录凭证已删除",d.message),await c(),window.dispatchEvent(new Event("login-state-changed")),q.value=!1}catch(d){P("删除登录凭证失败",d.message)}finally{L.value=!1}}async function Ne(){$.value=!0,I.value=null;try{const d=await Et();if(ie.value=d,k.value&&d.includes(k.value))return;const t=localStorage.getItem("lastSelectedPrompt");if(t&&d.includes(t)){k.value=t;return}k.value=d[0]||null}catch(d){I.value=d.message||"加载 Prompt 列表失败"}finally{$.value=!1}}async function Me(){if(!k.value){P("请选择 Prompt 文件");return}J.value=!0;try{const d=await wt(k.value,H.value);B("Prompt 保存成功",d.message)}catch(d){P("Prompt 保存失败",d.message)}finally{J.value=!1}}return ue(f,d=>{d==="prompts"&&Ne()}),ue(()=>oe.query.tab,d=>{typeof d=="string"&&ne.has(d)&&(f.value=d)},{immediate:!0}),ue(k,async d=>{if(!d){H.value="";return}localStorage.setItem("lastSelectedPrompt",d),$.value=!0,I.value=null;try{const t=await St(d);H.value=t.content}catch(t){I.value=t.message||"加载 Prompt 内容失败"}finally{$.value=!1}}),(d,t)=>(x(),C("div",null,[t[85]||(t[85]=s("h1",{class:"text-2xl font-bold text-gray-800 mb-6"},"系统设置",-1)),e(_)?(x(),C("div",kt,V(e(_).message),1)):N("",!0),l(e(Vt),{modelValue:f.value,"onUpdate:modelValue":t[23]||(t[23]=i=>f.value=i),class:"w-full"},{default:a(()=>[l(e(Ot),{class:"mb-4"},{default:a(()=>[l(e(te),{value:"ai"},{default:a(()=>[...t[29]||(t[29]=[n("AI 模型",-1)])]),_:1}),l(e(te),{value:"notifications"},{default:a(()=>[...t[30]||(t[30]=[n("通知推送",-1)])]),_:1}),l(e(te),{value:"status"},{default:a(()=>[...t[31]||(t[31]=[n("系统状态",-1)])]),_:1}),l(e(te),{value:"prompts"},{default:a(()=>[...t[32]||(t[32]=[n("Prompt 管理",-1)])]),_:1})]),_:1}),l(e(ee),{value:"ai"},{default:a(()=>[l(e(X),null,{default:a(()=>[l(e(Q),null,{default:a(()=>[l(e(Z),null,{default:a(()=>[...t[33]||(t[33]=[n("AI 模型设置",-1)])]),_:1}),l(e(de),null,{default:a(()=>[...t[34]||(t[34]=[n("配置用于商品分析的大语言模型。",-1)])]),_:1})]),_:1}),e(m)?(x(),w(e(W),{key:0,class:"space-y-4"},{default:a(()=>[s("div",Pt,[l(e(b),null,{default:a(()=>[...t[35]||(t[35]=[n("API Base URL",-1)])]),_:1}),l(e(S),{modelValue:e(r).OPENAI_BASE_URL,"onUpdate:modelValue":t[0]||(t[0]=i=>e(r).OPENAI_BASE_URL=i),placeholder:"https://api.openai.com/v1"},null,8,["modelValue"])]),s("div",At,[l(e(b),null,{default:a(()=>[...t[36]||(t[36]=[n("API Key",-1)])]),_:1}),s("div",Ct,[l(e(S),{modelValue:e(r).OPENAI_API_KEY,"onUpdate:modelValue":t[1]||(t[1]=i=>e(r).OPENAI_API_KEY=i),type:z.value?"text":"password",placeholder:"sk-...",class:"flex-1"},null,8,["modelValue","type"]),l(e(O),{type:"button",variant:"outline",size:"sm",onClick:t[2]||(t[2]=i=>z.value=!z.value)},{default:a(()=>[n(V(z.value?"隐藏":"显示"),1)]),_:1})])]),s("div",Rt,[l(e(b),null,{default:a(()=>[...t[37]||(t[37]=[n("模型名称",-1)])]),_:1}),l(e(S),{modelValue:e(r).OPENAI_MODEL_NAME,"onUpdate:modelValue":t[3]||(t[3]=i=>e(r).OPENAI_MODEL_NAME=i),placeholder:"gpt-3.5-turbo"},null,8,["modelValue"])]),s("div",Bt,[l(e(b),null,{default:a(()=>[...t[38]||(t[38]=[n("代理地址 (可选)",-1)])]),_:1}),l(e(S),{modelValue:e(r).PROXY_URL,"onUpdate:modelValue":t[4]||(t[4]=i=>e(r).PROXY_URL=i),placeholder:"http://127.0.0.1:7890"},null,8,["modelValue"])])]),_:1})):(x(),w(e(W),{key:1,class:"py-8 text-sm text-gray-500"},{default:a(()=>[...t[39]||(t[39]=[n(" 正在加载 AI 配置... ",-1)])]),_:1})),e(m)?(x(),w(e(re),{key:2,class:"flex gap-2"},{default:a(()=>[l(e(O),{variant:"outline",onClick:Ue,disabled:e(v)},{default:a(()=>[...t[40]||(t[40]=[n("测试连接 (浏览器)",-1)])]),_:1},8,["disabled"]),l(e(O),{variant:"outline",onClick:Le,disabled:e(v)},{default:a(()=>[...t[41]||(t[41]=[n("测试连接 (后端容器)",-1)])]),_:1},8,["disabled"]),l(e(O),{onClick:Be,disabled:e(v)},{default:a(()=>[...t[42]||(t[42]=[n("保存 AI 设置",-1)])]),_:1},8,["disabled"])]),_:1})):N("",!0)]),_:1})]),_:1}),l(e(ee),{value:"notifications"},{default:a(()=>[l(e(X),null,{default:a(()=>[l(e(Q),null,{default:a(()=>[l(e(Z),null,{default:a(()=>[...t[43]||(t[43]=[n("通知推送设置",-1)])]),_:1}),l(e(de),null,{default:a(()=>[...t[44]||(t[44]=[n("配置爬虫任务完成后的消息推送渠道。",-1)])]),_:1})]),_:1}),l(e(W),{class:"space-y-4"},{default:a(()=>[s("div",Ut,[l(e(b),null,{default:a(()=>[...t[45]||(t[45]=[n("Bark URL (iOS)",-1)])]),_:1}),l(e(S),{modelValue:e(o).BARK_URL,"onUpdate:modelValue":t[5]||(t[5]=i=>e(o).BARK_URL=i),placeholder:"https://api.day.app/YOUR_KEY/"},null,8,["modelValue"])]),s("div",Lt,[l(e(b),null,{default:a(()=>[...t[46]||(t[46]=[n("Ntfy Topic URL",-1)])]),_:1}),l(e(S),{modelValue:e(o).NTFY_TOPIC_URL,"onUpdate:modelValue":t[6]||(t[6]=i=>e(o).NTFY_TOPIC_URL=i),placeholder:"https://ntfy.sh/topic"},null,8,["modelValue"])]),s("div",$t,[s("div",It,[l(e(b),null,{default:a(()=>[...t[47]||(t[47]=[n("Gotify URL",-1)])]),_:1}),l(e(S),{modelValue:e(o).GOTIFY_URL,"onUpdate:modelValue":t[7]||(t[7]=i=>e(o).GOTIFY_URL=i),placeholder:"https://gotify.example.com"},null,8,["modelValue"])]),s("div",Nt,[l(e(b),null,{default:a(()=>[...t[48]||(t[48]=[n("Gotify Token",-1)])]),_:1}),l(e(S),{modelValue:e(o).GOTIFY_TOKEN,"onUpdate:modelValue":t[8]||(t[8]=i=>e(o).GOTIFY_TOKEN=i),placeholder:"Token"},null,8,["modelValue"])])]),s("div",Mt,[l(e(b),null,{default:a(()=>[...t[49]||(t[49]=[n("企业微信 Bot URL",-1)])]),_:1}),l(e(S),{modelValue:e(o).WX_BOT_URL,"onUpdate:modelValue":t[9]||(t[9]=i=>e(o).WX_BOT_URL=i),placeholder:"https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=..."},null,8,["modelValue"])]),s("div",Kt,[s("div",qt,[l(e(b),null,{default:a(()=>[...t[50]||(t[50]=[n("Telegram Bot Token",-1)])]),_:1}),l(e(S),{modelValue:e(o).TELEGRAM_BOT_TOKEN,"onUpdate:modelValue":t[10]||(t[10]=i=>e(o).TELEGRAM_BOT_TOKEN=i)},null,8,["modelValue"])]),s("div",Ht,[l(e(b),null,{default:a(()=>[...t[51]||(t[51]=[n("Telegram Chat ID",-1)])]),_:1}),l(e(S),{modelValue:e(o).TELEGRAM_CHAT_ID,"onUpdate:modelValue":t[11]||(t[11]=i=>e(o).TELEGRAM_CHAT_ID=i)},null,8,["modelValue"])])]),s("div",Dt,[s("div",Wt,[l(e(b),null,{default:a(()=>[...t[52]||(t[52]=[n("通用 Webhook URL",-1)])]),_:1}),l(e(S),{modelValue:e(o).WEBHOOK_URL,"onUpdate:modelValue":t[12]||(t[12]=i=>e(o).WEBHOOK_URL=i),placeholder:"https://your-webhook-url.com/endpoint"},null,8,["modelValue"])]),s("div",Yt,[s("div",Ft,[l(e(b),null,{default:a(()=>[...t[53]||(t[53]=[n("Webhook 方法",-1)])]),_:1}),l(e(fe),{"model-value":e(o).WEBHOOK_METHOD||"POST","onUpdate:modelValue":t[13]||(t[13]=i=>e(o).WEBHOOK_METHOD=i)},{default:a(()=>[l(e(pe),null,{default:a(()=>[l(e(ve))]),_:1}),l(e(me),null,{default:a(()=>[l(e(Y),{value:"POST"},{default:a(()=>[...t[54]||(t[54]=[n("POST",-1)])]),_:1}),l(e(Y),{value:"GET"},{default:a(()=>[...t[55]||(t[55]=[n("GET",-1)])]),_:1})]),_:1})]),_:1},8,["model-value"])]),s("div",Gt,[l(e(b),null,{default:a(()=>[...t[56]||(t[56]=[n("Webhook 内容类型",-1)])]),_:1}),l(e(fe),{"model-value":e(o).WEBHOOK_CONTENT_TYPE||"JSON","onUpdate:modelValue":t[14]||(t[14]=i=>e(o).WEBHOOK_CONTENT_TYPE=i)},{default:a(()=>[l(e(pe),null,{default:a(()=>[l(e(ve))]),_:1}),l(e(me),null,{default:a(()=>[l(e(Y),{value:"JSON"},{default:a(()=>[...t[57]||(t[57]=[n("JSON",-1)])]),_:1}),l(e(Y),{value:"FORM"},{default:a(()=>[...t[58]||(t[58]=[n("FORM",-1)])]),_:1})]),_:1})]),_:1},8,["model-value"])])]),s("div",jt,[l(e(b),null,{default:a(()=>[...t[59]||(t[59]=[n("Webhook 请求头 (JSON)",-1)])]),_:1}),l(e(D),{modelValue:e(o).WEBHOOK_HEADERS,"onUpdate:modelValue":t[15]||(t[15]=i=>e(o).WEBHOOK_HEADERS=i),placeholder:'例如: {"Authorization": "Bearer token"}'},null,8,["modelValue"])]),s("div",zt,[l(e(b),null,{default:a(()=>[...t[60]||(t[60]=[n("Webhook Query 参数 (JSON)",-1)])]),_:1}),l(e(D),{modelValue:e(o).WEBHOOK_QUERY_PARAMETERS,"onUpdate:modelValue":t[16]||(t[16]=i=>e(o).WEBHOOK_QUERY_PARAMETERS=i),placeholder:'例如: {"param1": "value1"}'},null,8,["modelValue"])]),s("div",Jt,[l(e(b),null,{default:a(()=>[...t[61]||(t[61]=[n("Webhook Body (支持变量)",-1)])]),_:1}),l(e(D),{modelValue:e(o).WEBHOOK_BODY,"onUpdate:modelValue":t[17]||(t[17]=i=>e(o).WEBHOOK_BODY=i),placeholder:'例如: {"message": "${content}"}'},null,8,["modelValue"])])]),s("div",ht,[l(e(it),{id:"pcurl",modelValue:e(o).PCURL_TO_MOBILE,"onUpdate:modelValue":t[18]||(t[18]=i=>e(o).PCURL_TO_MOBILE=i)},null,8,["modelValue"]),l(e(b),{for:"pcurl"},{default:a(()=>[...t[62]||(t[62]=[n("将商品链接转换为手机端链接",-1)])]),_:1})])]),_:1}),l(e(re),null,{default:a(()=>[l(e(O),{onClick:Re,disabled:e(v)},{default:a(()=>[...t[63]||(t[63]=[n("保存通知设置",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),l(e(ee),{value:"status"},{default:a(()=>[l(e(X),null,{default:a(()=>[l(e(Q),null,{default:a(()=>[l(e(Z),null,{default:a(()=>[...t[64]||(t[64]=[n("系统运行状态",-1)])]),_:1}),s("div",Xt,[l(e(O),{variant:"outline",size:"sm",onClick:e(c),disabled:e(g)},{default:a(()=>[...t[65]||(t[65]=[n("刷新状态",-1)])]),_:1},8,["onClick","disabled"])])]),_:1}),l(e(W),null,{default:a(()=>[e(u)?(x(),C("div",Qt,[s("div",Zt,[t[66]||(t[66]=s("div",null,[s("h3",{class:"font-medium"},"爬虫进程"),s("p",{class:"text-sm text-gray-500"},"当前是否有任务正在执行抓取")],-1)),s("span",{class:U(e(u).scraper_running?"text-green-600 font-bold bg-green-50 px-3 py-1 rounded-full":"text-gray-500 bg-gray-100 px-3 py-1 rounded-full")},V(e(u).scraper_running?"运行中":"空闲"),3)]),s("div",el,[s("div",tl,[t[67]||(t[67]=s("div",null,[s("h3",{class:"font-medium"},"闲鱼登录凭证"),s("p",{class:"text-sm text-gray-500"},"用于访问闲鱼数据的 Cookie 文件 (xianyu_state.json)")],-1)),s("span",{class:U(e(u).login_state_file.exists?"text-green-600 font-bold bg-green-50 px-3 py-1 rounded-full":"text-red-600 font-bold bg-red-50 px-3 py-1 rounded-full")},V(e(u).login_state_file.exists?"有效":"缺失"),3)]),s("div",ll,[l(e(O),{size:"sm",variant:"outline",onClick:t[19]||(t[19]=i=>K.value=!0)},{default:a(()=>[...t[68]||(t[68]=[n(" 手动更新 ",-1)])]),_:1}),l(e(O),{size:"sm",variant:"destructive",disabled:L.value||!e(u).login_state_file.exists,onClick:t[20]||(t[20]=i=>q.value=!0)},{default:a(()=>[n(V(L.value?"删除中...":"删除凭证"),1)]),_:1},8,["disabled"])]),e(u).login_state_file.exists?N("",!0):(x(),C("div",al,[...t[69]||(t[69]=[s("h4",{class:"font-bold flex items-center gap-2 mb-2"}," ⚠️ 检测到未登录，请按以下步骤操作： ",-1),s("ol",{class:"list-decimal list-inside space-y-1 ml-1"},[s("li",null,[n("在服务器/本机终端执行命令进入容器： "),s("code",{class:"bg-black/10 px-1 rounded select-all"},"docker exec -it ai-goofish-monitor-app bash")]),s("li",null,[n("在容器内执行登录脚本： "),s("code",{class:"bg-black/10 px-1 rounded select-all"},"python login.py")]),s("li",null,"终端会显示一个二维码，使用闲鱼APP扫码确认登录。"),s("li",null,[n("登录成功后，点击上方的 "),s("span",{class:"font-semibold"},"“刷新状态”"),n(" 按钮。")])],-1)])]))]),s("div",null,[s("div",sl,[t[70]||(t[70]=s("div",null,[s("h3",{class:"font-medium"},"环境变量配置"),s("p",{class:"text-sm text-gray-500"},"检查 .env 配置文件中的关键项")],-1)),s("span",{class:U(e(u).env_file.exists?"text-green-600 font-bold bg-green-50 px-3 py-1 rounded-full":"text-red-600 font-bold bg-red-50 px-3 py-1 rounded-full")},V(e(u).env_file.exists?"已加载":"缺失"),3)]),s("div",ol,[s("div",{class:U(["p-3 border rounded-lg",e(u).env_file.openai_api_key_set?"bg-green-50 border-green-200":"bg-yellow-50 border-yellow-200"])},[s("div",nl,[t[71]||(t[71]=s("span",{class:"font-medium text-sm"},"OpenAI API Key",-1)),s("span",{class:U(["text-xs font-bold",e(u).env_file.openai_api_key_set?"text-green-700":"text-yellow-700"])},V(e(u).env_file.openai_api_key_set?"已配置":"未配置"),3)])],2),s("div",{class:U(["p-3 border rounded-lg",e(u).env_file.ntfy_topic_url_set||e(u).env_file.gotify_url_set||e(u).env_file.bark_url_set?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"])},[s("div",il,[t[72]||(t[72]=s("span",{class:"font-medium text-sm"},"通知渠道",-1)),s("span",{class:U(["text-xs font-bold",e(u).env_file.ntfy_topic_url_set||e(u).env_file.gotify_url_set||e(u).env_file.bark_url_set?"text-green-700":"text-gray-500"])},V(e(u).env_file.ntfy_topic_url_set||e(u).env_file.gotify_url_set||e(u).env_file.bark_url_set?"已配置":"未配置"),3)]),s("div",ul,V([e(u).env_file.ntfy_topic_url_set?"Ntfy":"",e(u).env_file.gotify_url_set?"Gotify":"",e(u).env_file.bark_url_set?"Bark":""].filter(Boolean).join(", ")||"无"),1)],2)])])])):(x(),C("div",dl," 正在获取系统状态... "))]),_:1})]),_:1})]),_:1}),l(e(ee),{value:"prompts"},{default:a(()=>[l(e(X),null,{default:a(()=>[l(e(Q),null,{default:a(()=>[l(e(Z),null,{default:a(()=>[...t[73]||(t[73]=[n("Prompt 管理",-1)])]),_:1}),l(e(de),null,{default:a(()=>[...t[74]||(t[74]=[n("在线编辑 prompts 目录下的 Prompt 文件。",-1)])]),_:1})]),_:1}),l(e(W),{class:"space-y-4"},{default:a(()=>[I.value?(x(),C("div",rl,V(I.value),1)):N("",!0),s("div",fl,[l(e(b),null,{default:a(()=>[...t[75]||(t[75]=[n("选择 Prompt 文件",-1)])]),_:1}),l(e(fe),{"model-value":k.value||void 0,"onUpdate:modelValue":t[21]||(t[21]=i=>k.value=i)},{default:a(()=>[l(e(pe),null,{default:a(()=>[l(e(ve),{placeholder:"请选择一个 Prompt 文件..."})]),_:1}),l(e(me),null,{default:a(()=>[(x(!0),C(lt,null,at(ie.value,i=>(x(),w(e(Y),{key:i,value:i},{default:a(()=>[n(V(i),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value"]),!ie.value.length&&!$.value?(x(),C("p",pl," 没有找到 Prompt 文件。 ")):N("",!0)]),s("div",vl,[l(e(b),null,{default:a(()=>[...t[76]||(t[76]=[n("Prompt 内容",-1)])]),_:1}),l(e(D),{modelValue:H.value,"onUpdate:modelValue":t[22]||(t[22]=i=>H.value=i),class:"min-h-[240px]",disabled:!k.value||$.value,placeholder:"请选择一个 Prompt 文件进行编辑..."},null,8,["modelValue","disabled"])])]),_:1}),l(e(re),null,{default:a(()=>[l(e(O),{disabled:J.value||!k.value,onClick:Me},{default:a(()=>[n(V(J.value?"保存中...":"保存更改"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(e(Se),{open:K.value,"onUpdate:open":t[26]||(t[26]=i=>K.value=i)},{default:a(()=>[l(e(xe),{class:"sm:max-w-[700px]"},{default:a(()=>[l(e(Ve),null,{default:a(()=>[l(e(Oe),null,{default:a(()=>[...t[77]||(t[77]=[n("手动更新登录状态 (Cookie)",-1)])]),_:1}),l(e(Te),null,{default:a(()=>[...t[78]||(t[78]=[n(" 用于在无法运行图形化浏览器的服务器上更新闲鱼登录凭证。 ",-1)])]),_:1})]),_:1}),s("div",ml,[t[80]||(t[80]=s("div",null,[s("h4",{class:"font-medium text-gray-800 mb-2"},"使用 Chrome 扩展（推荐）"),s("ol",{class:"list-decimal list-inside space-y-1"},[s("li",null,[n("安装 "),s("a",{class:"text-blue-600 hover:underline",href:"https://chromewebstore.google.com/detail/xianyu-login-state-extrac/eidlpfjiodpigmfcahkmlenhppfklcoa",target:"_blank",rel:"noopener noreferrer"},"闲鱼登录状态提取扩展")]),s("li",null,[n("打开并登录 "),s("a",{class:"text-blue-600 hover:underline",href:"https://www.goofish.com",target:"_blank",rel:"noopener noreferrer"},"闲鱼官网")]),s("li",null,"点击扩展图标，选择“提取登录状态”，再点击“复制到剪贴板”"),s("li",null,"将内容粘贴到下方文本框并保存")])],-1)),s("div",_l,[l(e(b),null,{default:a(()=>[...t[79]||(t[79]=[n("粘贴 JSON 内容",-1)])]),_:1}),l(e(D),{modelValue:G.value,"onUpdate:modelValue":t[24]||(t[24]=i=>G.value=i),class:"min-h-[160px]",placeholder:"请在此处粘贴从浏览器扩展复制的 JSON 文本..."},null,8,["modelValue"])])]),l(e(Ee),null,{default:a(()=>[l(e(O),{variant:"outline",onClick:t[25]||(t[25]=i=>K.value=!1)},{default:a(()=>[...t[81]||(t[81]=[n("取消",-1)])]),_:1}),l(e(O),{disabled:j.value,onClick:$e},{default:a(()=>[n(V(j.value?"保存中...":"保存"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),l(e(Se),{open:q.value,"onUpdate:open":t[28]||(t[28]=i=>q.value=i)},{default:a(()=>[l(e(xe),{class:"sm:max-w-[420px]"},{default:a(()=>[l(e(Ve),null,{default:a(()=>[l(e(Oe),null,{default:a(()=>[...t[82]||(t[82]=[n("删除登录凭证",-1)])]),_:1}),l(e(Te),null,{default:a(()=>[...t[83]||(t[83]=[n(" 删除后需要重新设置才能运行任务，确定要继续吗？ ",-1)])]),_:1})]),_:1}),l(e(Ee),null,{default:a(()=>[l(e(O),{variant:"outline",onClick:t[27]||(t[27]=i=>q.value=!1)},{default:a(()=>[...t[84]||(t[84]=[n("取消",-1)])]),_:1}),l(e(O),{variant:"destructive",disabled:L.value,onClick:Ie},{default:a(()=>[n(V(L.value?"删除中...":"确认删除"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]))}});export{Tl as default};
